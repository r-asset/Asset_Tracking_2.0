<div *ngIf="!displaytable">
  <img src="../../../../assets/filter.png" alt="filter" (click)="openfilter1()">
    <div *ngIf="formgroup" class="custom_form">
        <form [formGroup]="form" (ngSubmit)="OnSubmit()" novalidate>
            <div class="top-align">
                <div class="field">
                    <label for="dropdown" class="block mb-2" style="width:151px;font-size:13px">Select Month & Year</label>
                        <p-calendar  dateFormat="yy.mm.dd" [maxDate]="maxDate" [showIcon]="true" [style]="{'width':'150px','height':'48px'}" formControlName="aa_frmdte" ></p-calendar>
                    </div>
                <div class="field">
                    <label for="dropdown" class="block mb-2" style="width:100px;font-size:13px">Select site</label>
                        <p-dropdown  [options]="sitesname" id="dropdown" formControlName="aa_siteid"  placeholder="Nothing Selected" class="w-full" [style]="{'width':'160px'}"></p-dropdown>
                    </div>

                <div class="field mt-1">
                    <p-button label="Apply Filter" type="submit" class="block mt-3 pt-2" icon="pi pi-search" styleClass="p-button-danger" [disabled]="!form.valid"  [style]="{'height':'40px'}"><i class="pi pi-search"></i></p-button>
            </div>
            </div>
        </form>
    </div>
</div>

<div *ngIf="showloader"><img src="assets\loader1.gif" alt="" class="loader1"></div>
<div *ngIf="displaytable">
   <img src="../../../../assets/filter.png" alt="filter" (click)="openfilter()">

        <div class="mt-2">
            <div class="searchtab ml-2" >
                <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input pInputText  type="text" (input)="applyFilterGlobal($event, 'contains')" placeholder="Global Search" [style]="{'width':'180px','height':'37px'}"/>
            </span>

            <div class="heading">
                <h6 class="pt-2" style="text-align: center; font-weight: 600;" >Asset Availability</h6>
            </div>

            <div class="tablehead pb-2 pt-2 mr-2">
            <p-button icon="pi pi-file-excel" label="Export" styleClass="p-button-raised p-button-success p-button-text"  pTooltip="XLS" tooltipPosition="bottom" [style]="{'width':'120px','height':'37px'}" (click)="exportExcel()"><i class="pi pi-file-excel"></i></p-button>
            </div>

        </div>
            <p-table #dt
                id = "dom"
                [value]="assetavailabilityTable"
                [scrollable]="true"
                scrollHeight="230px"
            >
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="rowIndex">S.No                    <p-sortIcon field="rowIndex" ></p-sortIcon></th>
                        <th pSortableColumn="name">Name                        <p-sortIcon field="name" ></p-sortIcon></th>
                        <th pSortableColumn="category">Zone Name                <p-sortIcon field="category" ></p-sortIcon></th>
                        <th pSortableColumn="condition">Condition              <p-sortIcon field="condition" ></p-sortIcon></th>
                        <th pSortableColumn="currentlocation">Current Location <p-sortIcon field="currentlocation" ></p-sortIcon></th>
                        <th pSortableColumn="nextservice">next service         <p-sortIcon field="nextservice" ></p-sortIcon></th>
                        <th pSortableColumn="v">Expiration Day                 <p-sortIcon field="v" ></p-sortIcon></th>
                        <th pSortableColumn="lastseen">Last seen               <p-sortIcon field="lastseen" ></p-sortIcon></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-i let-rowIndex="rowIndex +1">
                    <tr>
                        <td>{{ rowIndex }}</td>
                        <td>{{ i.name }}</td>
                        <td>{{ i.category }}</td>
                        <td>{{ i.condition }}</td>
                        <td>{{ i.currentlocation }}</td>
                        <td>{{ i.nextservice }}</td>
                        <td>{{ i.expireson }}</td>
                        <td>{{ i.lastseen }}</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
</div>
